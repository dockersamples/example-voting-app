pipeline { 
  agent{
	  docker{
		  image 'node:8.16.0-alpine'
    }
  }

  stages{ 
      stage(build){ 
        when{ 
            changeset "**/result/**" 
          }
        steps{ 
      echo 'Compiling result app..' 
      dir('worker'){ 
        sh 'npm install' 
      } 
    } 
  } 
  stage(test){ 
    when{ 
      changeset "**/result/**" 
    } 
    steps{ 
      echo 'Running Unit Tests on result app..' 
      dir('result'){ 
        sh 'npm install' 
        sh 'npm test' 
       } 
          } 
      } 
  } 
} 
